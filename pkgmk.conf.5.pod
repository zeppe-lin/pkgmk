# See COPYING and COPYRIGHT files for corresponding information.

=pod

=encoding UTF-8

=head1 NAME

pkgmk.conf - configuration file for pkgmk

=head1 SYNOPSIS

B</etc/pkgmk.conf>

=head1 DESCRIPTION

This manual page describes the format of the F<pkgmk.conf> file.  This
file is a simple shell file that configures L<pkgmk(8)>.  The file
consists of a number of variable assignments of the form
C<option=value>.  Comments can be specified by putting a hash (C<#>)
symbol as the first character on the line.

If some option is not used (commented out or not included in the
configuration file at all) L<pkgmk(8)> will take a default action.

The different configuration options are:

=over 8

=item B<export CFLAGS>="I<STRING>"

Set C compiler options.

Default: none.

=item B<export CXXFLAGS>="I<STRING>"

Set C++ compiler options.

Default: none.

=item B<export JOBS>="I<NUMBER>"

Set the number of commands to run simultaneously when building a
package.

Default: none.

=item B<export MAKEFLAGS>="I<STRING>"

Set L<make(1)> options.

Default: none.

=item B<PKGMK_SOURCE_MIRRORS>="I<STRING> ..."

Set mirrors to check and download source archives from.  If the URI
contains space symbol, replace it by C<%20>.

Default: none.

=item B<PKGMK_SOURCE_DIR>="I<STRING>"

Set directory for downloaded source archives.

Default: directory of Pkgfile.

=item B<PKGMK_PACKAGE_DIR>="I<STRING>"

Set directory for built packages.

Default: directory of Pkgfile.

=item B<PKGMK_WORK_DIR>="I<STRING>"

Set directory for building packages.

Default: 'B<foo>/work', where B<foo> is the directory of the
Pkgfile.

=item B<PKGMK_DOWNLOAD>="I<STRING>"

If set to C<yes>, L<pkgmk(8)> will download the source archives if
necessary.  Valid strings are C<yes> and C<no>.

Default: no.

=item B<PKGMK_DOWNLOAD_PROG>="I<STRING>"

Use specified program to download source archives.  Valid strings are
C<aria2c>, C<curl> and C<wget>.

Default: C<curl>.

=item B<PKGMK_ARIA2C_OPTS>="I<STRING>"

Additional options for L<aria2c(1)>, which is used by L<pkgmk(8)> to
download all files.

Default: none.

=item B<PKGMK_CURL_OPTS>="I<STRING>"

Additional options for L<curl(1)>, which is used by L<pkgmk(8)> to
download all files.

Default: none.

=item B<PKGMK_WGET_OPTS>="I<STRING>"

Additional options for L<wget(1)>, which is used by L<pkgmk(8)> to
download all files.

Default: none.

=item B<PKGMK_IGNORE_FOOTPRINT>="I<STRING>"

If set to C<yes>, L<pkgmk(8)> will not perform a footprint check of
the built package.  Valid string are C<yes> and C<no>.

Default: C<no>.

=item B<PKGMK_IGNORE_MD5SUM>="I<STRING>"

If set to C<yes>, L<pkgmk(8)> will not perform a md5sum check of the
source archives.  Valid string are C<yes> and C<no>.

Default: C<no>.

=item B<PKGMK_IGNORE_NEW>="I<STRING>"

If set to C<yes>, L<pkgmk(8)> will ignore new files in a footprint
mismatch.  Valid string are C<yes> and C<no>.

Default: C<no>.

=item B<PKGMK_NO_STRIP>="I<STRING>"

If set to C<no>, L<pkgmk(8)> will strip built binaries.  Valid string
are C<yes> and C<no>.

Default: C<no>.

=item B<PKGMK_COMPRESSION_MODE>="I<STRING>"

Option to select the mode used to compress the packages.  Valid
strings are C<gz>, C<bz2>, C<xz>, C<lz> and C<zst>.

Default: C<gz>.

=back

=head1 EXAMPLE

  #
  # /etc/pkgmk.conf: pkgmk(8) configuration
  #
  # See pkgmk.conf(5) for more information.
  #

  export CFLAGS="-O2 -march=x86-64 -pipe -fdiagnostics-color=always"
  export CXXFLAGS="$CFLAGS"
  export JOBS=$(getconf _NPROCESSORS_ONLN)
  export MAKEFLAGS="-j $JOBS"

  case $PKGMK_ARCH in
  "64"|"")
          ;;
  "32")
          export CFLAGS="$CFLAGS -m32"
          export CXXFLAGS="$CXXFLAGS -m32"
          export LDFLAGS="$LDFLAGS -m32"
          export PKG_CONFIG_LIBDIR="/usr/lib32/pkgconfig"
          ;;
  *)
          echo "Unknown architecture selected! Exiting."
          exit 1
          ;;
  esac

  # End of file.

=head1 FILES

=over 8

=item F</etc/pkgmk.conf>

Configuration file for L<pkgmk(8)>.

=back

=head1 SEE ALSO

L<pkgmk(8)>, L<Pkgfile(5)>

=cut

# vim:sw=2:ts=2:sts=2:et:cc=72:tw=70
# End of file.
